local ScriptVersion = "1.3"
local UrlKeyGithub = "https://raw.githubusercontent.com/Maplixx/B/refs/heads/main/key.txt"
local LinkKeyEncurtador = "https://fir3.net/KeyAmoledHub"
local LinkTikTok = "https://www.tiktok.com/@.rnyzx"
local LinkYoutube = "https://youtube.com/@s3venzzx"
local LinkInstagram = "https://www.instagram.com/yz.seven"

local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local UserSettings = UserSettings()

local guiName = "AmoledScreenSaverPro"
local fileName = "AmoledKey_Cache.txt"

if CoreGui:FindFirstChild(guiName) then CoreGui[guiName]:Destroy() end
if Players.LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild(guiName) then Players.LocalPlayer.PlayerGui[guiName]:Destroy() end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = guiName
screenGui.IgnoreGuiInset = true
screenGui.DisplayOrder = 10000
screenGui.ResetOnSpawn = false
pcall(function() screenGui.Parent = CoreGui end)
if not screenGui.Parent then screenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui") end

local menuBlur = Instance.new("BlurEffect")
menuBlur.Size = 0
menuBlur.Parent = Lighting

local function setBlur(enabled)
    TweenService:Create(menuBlur, TweenInfo.new(0.5), {Size = enabled and 20 or 0}):Play()
end

local function queueAutoLoad()
    if syn and syn.queue_on_teleport then
        syn.queue_on_teleport('loadstring(game:HttpGet("https://raw.githubusercontent.com/Maplixx/B/refs/heads/main/Farm"))()')
    elseif queue_on_teleport then
        queue_on_teleport('loadstring(game:HttpGet("https://raw.githubusercontent.com/Maplixx/B/refs/heads/main/Farm"))()')
    end
end
Players.LocalPlayer.OnTeleport:Connect(queueAutoLoad)

local function makeDraggable(clickObject, moveObject)
    local dragging, dragInput, dragStart, startPos
    clickObject.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = moveObject.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then dragging = false end
            end)
        end
    end)
    clickObject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            moveObject.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

local function createGradientStroke(parent)
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(255, 255, 255)
    stroke.Thickness = 2
    stroke.Transparency = 0.2
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    stroke.Parent = parent
    
    local grad = Instance.new("UIGradient")
    grad.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 0)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 100, 100)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(150, 0, 0))
    }
    grad.Rotation = 45
    grad.Parent = stroke
    
    task.spawn(function()
        while stroke.Parent do
            local t = TweenService:Create(grad, TweenInfo.new(2, Enum.EasingStyle.Linear), {Rotation = grad.Rotation + 360})
            t:Play()
            t.Completed:Wait()
        end
    end)
    return stroke
end

local function styleButton(btn, color)
    btn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    btn.BackgroundTransparency = 0.3
    btn.BorderSizePixel = 0
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.GothamBold
    Instance.new("UICorner", btn).CornerRadius = UDim.new(1, 0)
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = color
    stroke.Thickness = 1.5
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    stroke.Transparency = 0.3
    stroke.Parent = btn

    btn.MouseButton1Down:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.1), {Size = UDim2.new(btn.Size.X.Scale * 0.95, 0, btn.Size.Y.Scale * 0.95, 0)}):Play()
    end)
    btn.MouseButton1Up:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.1), {Size = UDim2.new(btn.Size.X.Scale / 0.95, 0, btn.Size.Y.Scale / 0.95, 0)}):Play()
    end)
end

local notifFrame = Instance.new("Frame")
notifFrame.Name = "Notification"
notifFrame.Size = UDim2.new(0, 320, 0, 50)
notifFrame.Position = UDim2.new(0.5, -160, 0.1, 0)
notifFrame.BackgroundColor3 = Color3.new(0, 0, 0)
notifFrame.BackgroundTransparency = 0.3
notifFrame.BorderSizePixel = 0
notifFrame.Visible = false
notifFrame.ZIndex = 300
notifFrame.Parent = screenGui
Instance.new("UICorner", notifFrame).CornerRadius = UDim.new(0, 16)
createGradientStroke(notifFrame)

local notifText = Instance.new("TextLabel")
notifText.Size = UDim2.new(1, 0, 1, 0)
notifText.BackgroundTransparency = 1
notifText.Text = ""
notifText.TextColor3 = Color3.new(1, 1, 1)
notifText.Font = Enum.Font.GothamBold
notifText.TextSize = 12
notifText.TextWrapped = true
notifText.ZIndex = 301
notifText.Parent = notifFrame

local function showToast(msg)
    notifText.Text = msg
    notifFrame.Visible = true
    notifFrame.Position = UDim2.new(0.5, -160, 0.05, 0)
    notifFrame.BackgroundTransparency = 1
    notifText.TextTransparency = 1
    
    local t1 = TweenService:Create(notifFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {Position = UDim2.new(0.5, -160, 0.1, 0), BackgroundTransparency = 0.3})
    local t2 = TweenService:Create(notifText, TweenInfo.new(0.5), {TextTransparency = 0})
    t1:Play(); t2:Play()
    
    task.wait(2.5)
    
    local t3 = TweenService:Create(notifFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {Position = UDim2.new(0.5, -160, 0.05, 0), BackgroundTransparency = 1})
    local t4 = TweenService:Create(notifText, TweenInfo.new(0.5), {TextTransparency = 1})
    t3:Play(); t4:Play()
    t3.Completed:Connect(function() notifFrame.Visible = false end)
end

local overlay = Instance.new("Frame")
overlay.Name = "BlackOverlay"
overlay.Size = UDim2.new(1, 0, 1, 0)
overlay.BackgroundColor3 = Color3.new(0, 0, 0)
overlay.BackgroundTransparency = 1 
overlay.Visible = false
overlay.ZIndex = 100
overlay.Active = true
overlay.Parent = screenGui

local countdownLabel = Instance.new("TextLabel")
countdownLabel.Size = UDim2.new(1, 0, 1, 0)
countdownLabel.BackgroundTransparency = 1
countdownLabel.TextColor3 = Color3.new(1, 1, 1)
countdownLabel.TextSize = 100
countdownLabel.Font = Enum.Font.GothamBold
countdownLabel.Text = ""
countdownLabel.ZIndex = 101
countdownLabel.Parent = overlay

local instructionLabel = Instance.new("TextLabel")
instructionLabel.Size = UDim2.new(1, 0, 0.2, 0)
instructionLabel.Position = UDim2.new(0, 0, 0.4, 0)
instructionLabel.BackgroundTransparency = 1
instructionLabel.TextColor3 = Color3.new(1, 1, 1)
instructionLabel.TextSize = 16
instructionLabel.Font = Enum.Font.GothamBold
instructionLabel.Text = "PARA SAIR BASTA DAR 2 TOQUES"
instructionLabel.TextTransparency = 1
instructionLabel.ZIndex = 101
instructionLabel.Parent = overlay

local unlockButton = Instance.new("TextButton")
unlockButton.Size = UDim2.new(1, 0, 1, 0)
unlockButton.BackgroundTransparency = 1
unlockButton.Text = ""
unlockButton.ZIndex = 102
unlockButton.Parent = overlay

local minIcon = Instance.new("TextButton")
minIcon.Name = "MinimizedIcon"
minIcon.Size = UDim2.new(0, 0, 0, 0)
minIcon.Position = UDim2.new(0.9, -60, 0.5, -25)
minIcon.BackgroundColor3 = Color3.new(0, 0, 0)
minIcon.BackgroundTransparency = 0.3
minIcon.Text = "S"
minIcon.TextColor3 = Color3.fromRGB(255, 50, 50)
minIcon.TextSize = 24
minIcon.Font = Enum.Font.GothamBold
minIcon.Visible = false
minIcon.TextTransparency = 1
minIcon.ZIndex = 200
minIcon.Parent = screenGui
Instance.new("UICorner", minIcon).CornerRadius = UDim.new(1, 0)
createGradientStroke(minIcon)
makeDraggable(minIcon, minIcon)

local keyFrame = Instance.new("Frame")
keyFrame.Name = "KeyFrame"
keyFrame.Size = UDim2.new(0, 320, 0, 240)
keyFrame.Position = UDim2.new(0.5, -160, 0.5, -120)
keyFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
keyFrame.BackgroundTransparency = 0.3
keyFrame.BorderSizePixel = 0
keyFrame.Visible = true
keyFrame.Parent = screenGui
Instance.new("UICorner", keyFrame).CornerRadius = UDim.new(0, 20)
createGradientStroke(keyFrame)

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 320, 0, 400)
mainFrame.Position = UDim2.new(0.5, -160, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BackgroundTransparency = 0.3
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false 
mainFrame.Parent = screenGui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 20)
createGradientStroke(mainFrame)

local currentMenu = keyFrame 
setBlur(true)

local function setupCommonElements(frame, titleText)
    local confirmGroup = Instance.new("Frame")
    confirmGroup.Name = "ConfirmGroup"
    confirmGroup.Size = UDim2.new(1, 0, 1, 0)
    confirmGroup.BackgroundTransparency = 1
    confirmGroup.Visible = false
    confirmGroup.ZIndex = 50
    confirmGroup.Parent = frame

    local confirmText = Instance.new("TextLabel")
    confirmText.Text = "Deseja Realmente Sair?"
    confirmText.Size = UDim2.new(1, 0, 0.4, 0)
    confirmText.Position = UDim2.new(0, 0, 0.1, 0)
    confirmText.BackgroundTransparency = 1
    confirmText.TextColor3 = Color3.new(1, 1, 1)
    confirmText.Font = Enum.Font.GothamBold
    confirmText.TextSize = 18
    confirmText.TextTransparency = 1
    confirmText.Parent = confirmGroup

    local btnSim = Instance.new("TextButton")
    btnSim.Text = "Sim"
    btnSim.Size = UDim2.new(0.42, 0, 0, 45)
    btnSim.Position = UDim2.new(0.05, 0, 0.6, 0)
    styleButton(btnSim, Color3.fromRGB(200, 50, 50))
    btnSim.Parent = confirmGroup
    btnSim.BackgroundTransparency = 1
    btnSim.TextTransparency = 1

    local btnNao = Instance.new("TextButton")
    btnNao.Text = "Não"
    btnNao.Size = UDim2.new(0.42, 0, 0, 45)
    btnNao.Position = UDim2.new(0.53, 0, 0.6, 0)
    styleButton(btnNao, Color3.fromRGB(200, 50, 50))
    btnNao.Parent = confirmGroup
    btnNao.BackgroundTransparency = 1
    btnNao.TextTransparency = 1

    local contentGroup = Instance.new("Frame")
    contentGroup.Name = "ContentGroup"
    contentGroup.Size = UDim2.new(1, 0, 1, 0)
    contentGroup.BackgroundTransparency = 1
    contentGroup.Parent = frame

    local dragHandle = Instance.new("TextButton")
    dragHandle.Name = "DragHandle"
    dragHandle.Size = UDim2.new(0, 40, 0, 40)
    dragHandle.Position = UDim2.new(1, -45, 1, -45)
    styleButton(dragHandle, Color3.fromRGB(255, 50, 50))
    dragHandle.Text = "✥"
    dragHandle.TextSize = 20
    dragHandle.Parent = contentGroup
    makeDraggable(dragHandle, frame)

    local title = Instance.new("TextLabel")
    title.Text = titleText
    title.Size = UDim2.new(1, -80, 0, 50)
    title.Position = UDim2.new(0, 40, 0, 0)
    title.BackgroundTransparency = 1
    title.TextColor3 = Color3.new(1, 1, 1)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 20
    title.Parent = contentGroup

    local closeBtn = Instance.new("TextButton")
    closeBtn.Text = "X"
    closeBtn.Size = UDim2.new(0, 32, 0, 32)
    closeBtn.Position = UDim2.new(1, -40, 0, 10)
    styleButton(closeBtn, Color3.fromRGB(255, 50, 50))
    closeBtn.Parent = contentGroup

    local minBtn = Instance.new("TextButton")
    minBtn.Text = "_"
    minBtn.Size = UDim2.new(0, 32, 0, 32)
    minBtn.Position = UDim2.new(1, -80, 0, 10)
    styleButton(minBtn, Color3.fromRGB(150, 150, 150))
    minBtn.Parent = contentGroup

    local function fadeGroup(group, transparency, time)
        for _, child in pairs(group:GetChildren()) do
            if child:IsA("GuiObject") then
                local targetTrans = transparency
                if child:IsA("TextButton") and transparency == 0 then targetTrans = 0.3 end 
                TweenService:Create(child, TweenInfo.new(time), {BackgroundTransparency = targetTrans}):Play()
                
                if child:IsA("TextLabel") or child:IsA("TextButton") or child:IsA("TextBox") then
                    TweenService:Create(child, TweenInfo.new(time), {TextTransparency = transparency}):Play()
                end
                if child:FindFirstChild("UIStroke") then
                     TweenService:Create(child.UIStroke, TweenInfo.new(time), {Transparency = (transparency == 1 and 1 or 0.3)}):Play()
                end
            end
        end
    end

    local savedPos = frame.Position
    local isAnimating = false

    closeBtn.MouseButton1Click:Connect(function()
        if isAnimating then return end
        isAnimating = true
        savedPos = frame.Position
        fadeGroup(contentGroup, 1, 0.3)
        task.wait(0.3)
        contentGroup.Visible = false
        local centerPos = UDim2.new(0.5, -125, 0.5, -75)
        local confirmSize = UDim2.new(0, 250, 0, 150)
        local tPos = TweenService:Create(frame, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = centerPos, Size = confirmSize})
        tPos:Play()
        tPos.Completed:Wait()
        confirmGroup.Visible = true
        TweenService:Create(confirmText, TweenInfo.new(0.5), {TextTransparency = 0}):Play()
        fadeGroup(confirmGroup, 0, 0.5)
        isAnimating = false
    end)

    btnNao.MouseButton1Click:Connect(function()
        if isAnimating then return end
        isAnimating = true
        fadeGroup(confirmGroup, 1, 0.3)
        task.wait(0.3)
        confirmGroup.Visible = false
        local tBack = TweenService:Create(frame, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = savedPos, Size = UDim2.new(0, 320, 0, frame == keyFrame and 240 or 400)})
        tBack:Play()
        tBack.Completed:Wait()
        contentGroup.Visible = true
        fadeGroup(contentGroup, 0, 0.3)
        title.BackgroundTransparency = 1
        isAnimating = false
    end)

    btnSim.MouseButton1Click:Connect(function()
        local tShrink = TweenService:Create(frame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(0,0,0,0)})
        tShrink:Play()
        fadeGroup(confirmGroup, 1, 0.3)
        setBlur(false)
        tShrink.Completed:Wait()
        screenGui:Destroy()
    end)

    minBtn.MouseButton1Click:Connect(function()
        if isAnimating then return end
        isAnimating = true
        currentMenu = frame
        savedPos = frame.Position
        fadeGroup(contentGroup, 1, 0.2)
        local tShrink = TweenService:Create(frame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Size = UDim2.new(0,0,0,0)})
        tShrink:Play()
        setBlur(false)
        tShrink.Completed:Wait()
        frame.Visible = false
        minIcon.Visible = true
        minIcon.Position = UDim2.new(savedPos.X.Scale, savedPos.X.Offset + 125, savedPos.Y.Scale, savedPos.Y.Offset + 100)
        local tGrow = TweenService:Create(minIcon, TweenInfo.new(0.5, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out), {Size = UDim2.new(0,50,0,50)})
        tGrow:Play()
        TweenService:Create(minIcon, TweenInfo.new(0.5), {TextTransparency = 0, BackgroundTransparency = 0.3}):Play()
        TweenService:Create(minIcon.UIStroke, TweenInfo.new(0.5), {Transparency = 0.3}):Play()
        isAnimating = false
    end)
    return contentGroup
end

local keyContent = setupCommonElements(keyFrame, "Login")
local mainContent = setupCommonElements(mainFrame, "Amoled Saver")

local warningLabel = Instance.new("TextLabel")
warningLabel.Text = ""
warningLabel.Size = UDim2.new(1, 0, 0, 20)
warningLabel.Position = UDim2.new(0, 0, 0.18, 0)
warningLabel.BackgroundTransparency = 1
warningLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
warningLabel.Font = Enum.Font.GothamBold
warningLabel.TextSize = 12
warningLabel.Parent = keyContent

local keyInput = Instance.new("TextBox")
keyInput.Size = UDim2.new(0.9, 0, 0, 45)
keyInput.Position = UDim2.new(0.05, 0, 0.3, 0)
keyInput.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
keyInput.BackgroundTransparency = 0.5
keyInput.TextColor3 = Color3.new(1, 1, 1)
keyInput.PlaceholderText = "Insira sua Key..."
keyInput.Font = Enum.Font.Gotham
keyInput.TextSize = 14
keyInput.Parent = keyContent
Instance.new("UICorner", keyInput).CornerRadius = UDim.new(1, 0)
local keyStroke = Instance.new("UIStroke")
keyStroke.Color = Color3.fromRGB(255, 50, 50)
keyStroke.Transparency = 0.5
keyStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
keyStroke.Parent = keyInput

local copyLinkBtn = Instance.new("TextButton")
copyLinkBtn.Text = "Obter Key"
copyLinkBtn.Size = UDim2.new(0.42, 0, 0, 45)
copyLinkBtn.Position = UDim2.new(0.05, 0, 0.6, 0)
styleButton(copyLinkBtn, Color3.fromRGB(0, 255, 100))
copyLinkBtn.Parent = keyContent

local checkBtn = Instance.new("TextButton")
checkBtn.Text = "Entrar"
checkBtn.Size = UDim2.new(0.42, 0, 0, 45)
checkBtn.Position = UDim2.new(0.53, 0, 0.6, 0)
styleButton(checkBtn, Color3.fromRGB(50, 150, 255))
checkBtn.Parent = keyContent

local progressBarBg = Instance.new("Frame")
progressBarBg.Size = UDim2.new(0.9, 0, 0, 4)
progressBarBg.Position = UDim2.new(0.05, 0, 0.85, 0)
progressBarBg.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBarBg.BackgroundTransparency = 0.5
progressBarBg.BorderSizePixel = 0
progressBarBg.Visible = false
progressBarBg.Parent = keyContent
Instance.new("UICorner", progressBarBg).CornerRadius = UDim.new(1, 0)

local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
progressBar.BorderSizePixel = 0
progressBar.Parent = progressBarBg
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(1, 0)

local function animateLoading()
    checkBtn.Text = "..."
    checkBtn.Active = false
    progressBarBg.Visible = true
    progressBar.Size = UDim2.new(0,0,1,0)
    TweenService:Create(progressBar, TweenInfo.new(1.5, Enum.EasingStyle.Linear), {Size = UDim2.new(1,0,1,0)}):Play()
    task.wait(1.5)
    checkBtn.Text = "Entrar"
    checkBtn.Active = true
    progressBarBg.Visible = false
end

local function checkKey(keyStr)
    local success, onlineKey = pcall(function()
        return game:HttpGet(UrlKeyGithub):gsub("^%s*(.-)%s*$", "%1")
    end)
    
    if success and keyStr == onlineKey then
        if writefile then
            writefile(fileName, keyStr)
        end
        return true, false 
    elseif success and keyStr ~= onlineKey then
        return false, true 
    else
        return false, false 
    end
end

copyLinkBtn.MouseButton1Click:Connect(function()
    setclipboard(LinkKeyEncurtador)
    showToast("LINK COPIADO!")
end)

checkBtn.MouseButton1Click:Connect(function()
    animateLoading()
    local userKey = keyInput.Text:gsub("^%s*(.-)%s*$", "%1")
    local isValid, isChanged = checkKey(userKey)
    
    if isValid then
        showToast("ACESSO PERMITIDO")
        task.wait(0.5)
        keyFrame.Visible = false
        mainFrame.Visible = true
        currentMenu = mainFrame
    elseif isChanged then
        showToast("KEY EXPIRADA")
        warningLabel.Text = "A KEY MUDOU! PEGUE A NOVA."
    else
        showToast("KEY INVÁLIDA")
        warningLabel.Text = "TENTE NOVAMENTE."
    end
end)

local footer = Instance.new("TextLabel")
footer.Text = "made by Seven"
footer.Size = UDim2.new(1, 0, 0, 20)
footer.Position = UDim2.new(0, 0, 1, -25)
footer.BackgroundTransparency = 1
footer.TextColor3 = Color3.fromRGB(0, 255, 255)
footer.Font = Enum.Font.Gotham
footer.TextSize = 12
footer.Parent = mainContent

local versionLabel = Instance.new("TextLabel")
versionLabel.Text = "Versão: " .. ScriptVersion
versionLabel.Size = UDim2.new(1, 0, 0, 20)
versionLabel.Position = UDim2.new(0, 0, 0.88, 0)
versionLabel.BackgroundTransparency = 1
versionLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
versionLabel.Font = Enum.Font.GothamBold
versionLabel.TextSize = 12
versionLabel.Parent = mainContent

local activateBtn = Instance.new("TextButton")
activateBtn.Text = "( Ativar )"
activateBtn.Size = UDim2.new(0.9, 0, 0, 50)
activateBtn.Position = UDim2.new(0.05, 0, 0.15, 0)
styleButton(activateBtn, Color3.fromRGB(255, 50, 50))
activateBtn.Parent = mainContent

local isMuted = false
local savedVolume = 1
local muteBtn = Instance.new("TextButton")
muteBtn.Text = "Mutar Jogo"
muteBtn.Size = UDim2.new(0.42, 0, 0, 45)
muteBtn.Position = UDim2.new(0.05, 0, 0.3, 0)
styleButton(muteBtn, Color3.fromRGB(255, 150, 0))
muteBtn.Parent = mainContent

muteBtn.MouseButton1Click:Connect(function()
    if not isMuted then
        savedVolume = UserSettings.GameSettings.MasterVolume
        UserSettings.GameSettings.MasterVolume = 0
        muteBtn.Text = "Desmutar"
        muteBtn.UIStroke.Color = Color3.fromRGB(255, 0, 0)
        showToast("SOM DESATIVADO")
        isMuted = true
    else
        UserSettings.GameSettings.MasterVolume = savedVolume
        muteBtn.Text = "Mutar Jogo"
        muteBtn.UIStroke.Color = Color3.fromRGB(255, 150, 0)
        showToast("SOM ATIVADO")
        isMuted = false
    end
end)

local fpsBtn = Instance.new("TextButton")
fpsBtn.Text = "FPS Boost"
fpsBtn.Size = UDim2.new(0.42, 0, 0, 45)
fpsBtn.Position = UDim2.new(0.53, 0, 0.3, 0)
styleButton(fpsBtn, Color3.fromRGB(100, 50, 255))
fpsBtn.Parent = mainContent

fpsBtn.MouseButton1Click:Connect(function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Optiz-FpsBooster-60070"))()
    showToast("FPS BOOST ATIVO")
end)

local function createSocialBtn(text, color, pos, url)
    local btn = Instance.new("TextButton")
    btn.Text = text
    btn.Size = UDim2.new(0.9, 0, 0, 40)
    btn.Position = pos
    styleButton(btn, color)
    btn.Parent = mainContent
    btn.MouseButton1Click:Connect(function()
        setclipboard(url)
        showToast("LINK COPIADO")
    end)
end

createSocialBtn("TikTok", Color3.fromRGB(255, 255, 255), UDim2.new(0.05, 0, 0.45, 0), LinkTikTok)
createSocialBtn("Youtube", Color3.fromRGB(255, 0, 0), UDim2.new(0.05, 0, 0.57, 0), LinkYoutube)
createSocialBtn("Instagram", Color3.fromRGB(200, 50, 200), UDim2.new(0.05, 0, 0.69, 0), LinkInstagram)

local taps = 0
local isLocked = false

minIcon.MouseButton1Click:Connect(function()
    local iconPos = minIcon.Position
    local targetSize = (currentMenu == keyFrame) and UDim2.new(0, 320, 0, 240) or UDim2.new(0, 320, 0, 400)
    
    local endPos
    if iconPos.X.Scale > 0.5 then
        endPos = UDim2.new(iconPos.X.Scale, iconPos.X.Offset - 320, iconPos.Y.Scale, iconPos.Y.Offset)
    else
        endPos = UDim2.new(iconPos.X.Scale, iconPos.X.Offset, iconPos.Y.Scale, iconPos.Y.Offset)
    end
    
    local tShrink = TweenService:Create(minIcon, TweenInfo.new(0.3), {Size = UDim2.new(0,0,0,0)})
    tShrink:Play()
    tShrink.Completed:Wait()
    minIcon.Visible = false
    
    currentMenu.Visible = true
    currentMenu.Position = iconPos 
    currentMenu.Size = UDim2.new(0,0,0,0)
    
    local tMove = TweenService:Create(currentMenu, TweenInfo.new(0.6, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = endPos, Size = targetSize})
    tMove:Play()
    setBlur(true)
    
    if currentMenu:FindFirstChild("ContentGroup") then
        local cg = currentMenu.ContentGroup
        cg.Visible = true
        for _, child in pairs(cg:GetChildren()) do
            if child:IsA("GuiObject") then
                local targetTrans = 1
                if child:IsA("TextButton") then targetTrans = 0.3 end
                TweenService:Create(child, TweenInfo.new(0.5), {BackgroundTransparency = targetTrans}):Play()
                
                if child:IsA("TextLabel") or child:IsA("TextButton") or child:IsA("TextBox") then
                   TweenService:Create(child, TweenInfo.new(0.5), {TextTransparency = 0}):Play()
                end
                if child:FindFirstChild("UIStroke") then
                    TweenService:Create(child.UIStroke, TweenInfo.new(0.5), {Transparency = 0.3}):Play()
                end
            end
        end
        if currentMenu == mainContent.Parent then
           footer.BackgroundTransparency = 1
           versionLabel.BackgroundTransparency = 1
        end
    end
end)

local function activateAmoled()
    mainFrame.Visible = false
    minIcon.Visible = false
    overlay.Visible = true
    overlay.BackgroundTransparency = 1
    taps = 0
    isLocked = false
    setBlur(false)
    countdownLabel.Visible = true
    for i = 3, 1, -1 do
        countdownLabel.Text = tostring(i)
        task.wait(1)
    end
    countdownLabel.Text = ""
    countdownLabel.Visible = false
    local t = TweenService:Create(overlay, TweenInfo.new(1), {BackgroundTransparency = 0})
    t:Play()
    t.Completed:Wait()
    instructionLabel.TextTransparency = 0
    task.wait(2)
    TweenService:Create(instructionLabel, TweenInfo.new(1), {TextTransparency = 1}):Play()
    taps = 0
    isLocked = true
end

local function deactivateAmoled()
    isLocked = false
    local t = TweenService:Create(overlay, TweenInfo.new(1), {BackgroundTransparency = 1})
    t:Play()
    t.Completed:Connect(function()
        overlay.Visible = false
        taps = 0
        mainFrame.Visible = true
        setBlur(true)
    end)
end

activateBtn.MouseButton1Click:Connect(activateAmoled)
unlockButton.MouseButton1Click:Connect(function()
    if isLocked then
        taps = taps + 1
        if taps >= 2 then deactivateAmoled() end
    end
end)

task.spawn(function()
    if readfile and isfile and isfile(fileName) then
        local savedKey = readfile(fileName)
        animateLoading() 
        local isValid, isChanged = checkKey(savedKey)
        if isValid then
            showToast("BEM-VINDO DE VOLTA")
            keyFrame.Visible = false
            mainFrame.Visible = true
            currentMenu = mainFrame
        elseif isChanged then
             warningLabel.Text = "KEY EXPIRADA. PEGUE A NOVA."
             if delfile then delfile(fileName) end
        end
    end
end)
